<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>Mobile Detection Test</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: Arial, sans-serif;
      background: #1a1f3a;
      color: white;
    }
    #results {
      background: rgba(0,0,0,0.5);
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    .test-item {
      padding: 10px;
      margin: 10px 0;
      background: rgba(255,255,255,0.1);
      border-radius: 4px;
    }
    .pass { color: #00ff88; }
    .fail { color: #ff006e; }
  </style>
</head>
<body>
  <h1>üîç Mobile Detection Test</h1>
  <div id="results"></div>
  <button id="test-overlay" style="
    background: linear-gradient(135deg, #00d9ff, #ff006e);
    border: none;
    color: white;
    font-size: 1.2em;
    padding: 15px 40px;
    border-radius: 50px;
    cursor: pointer;
    font-weight: bold;
  ">Show Tap-to-Start Overlay</button>

  <script>
    const results = document.getElementById('results');

    // Run all detection tests
    function runTests() {
      const tests = {
        'User Agent': navigator.userAgent,
        'Has ontouchstart': 'ontouchstart' in window,
        'Max Touch Points': navigator.maxTouchPoints,
        'Screen Width': window.innerWidth,
        'Screen Height': window.innerHeight,
        'Mobile UA Match': /mobile|android|iphone|ipad|ipod/i.test(navigator.userAgent),
        'Touch Device': ('ontouchstart' in window || navigator.maxTouchPoints > 0)
      };

      let html = '<h3>Detection Results:</h3>';
      for (const [test, result] of Object.entries(tests)) {
        const resultStr = typeof result === 'boolean'
          ? (result ? '<span class="pass">‚úì TRUE</span>' : '<span class="fail">‚úó FALSE</span>')
          : `<span class="pass">${result}</span>`;
        html += `<div class="test-item"><strong>${test}:</strong> ${resultStr}</div>`;
      }

      // Final verdict
      const needsUserGesture =
        'ontouchstart' in window ||
        navigator.maxTouchPoints > 0 ||
        /mobile|android|iphone|ipad|ipod/i.test(navigator.userAgent);

      html += `<div class="test-item" style="font-size: 1.2em; border: 2px solid ${needsUserGesture ? '#00ff88' : '#ff006e'}">
        <strong>Should Show Overlay:</strong> ${needsUserGesture ? '<span class="pass">‚úì YES</span>' : '<span class="fail">‚úó NO</span>'}
      </div>`;

      results.innerHTML = html;
    }

    // Show the actual overlay
    function showOverlay() {
      const overlay = document.createElement('div');
      overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 10000;
        color: white;
      `;

      overlay.innerHTML = `
        <div style="text-align: center; padding: 20px;">
          <h1 style="font-size: 3em; margin-bottom: 20px;">üéµ</h1>
          <h2 style="font-size: 1.8em; margin-bottom: 10px;">BIGO DJ</h2>
          <p style="font-size: 1.2em; color: #888; margin-bottom: 40px;">Mobile Edition</p>
          <button id="mobile-start-btn" style="
            background: linear-gradient(135deg, #00d9ff, #ff006e);
            border: none;
            color: white;
            font-size: 1.5em;
            padding: 20px 60px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 4px 20px rgba(255, 0, 110, 0.4);
          ">TAP TO START</button>
          <p style="font-size: 0.9em; color: #666; margin-top: 30px;">This is what you should see!</p>
        </div>
      `;

      document.body.appendChild(overlay);

      overlay.querySelector('#mobile-start-btn').addEventListener('click', () => {
        overlay.remove();
        alert('‚úÖ Overlay works! The button was tapped and overlay removed.');
      });
    }

    // Run tests on load
    runTests();

    // Button to manually show overlay
    document.getElementById('test-overlay').addEventListener('click', showOverlay);

    // Auto-show overlay if mobile detected
    const needsUserGesture =
      'ontouchstart' in window ||
      navigator.maxTouchPoints > 0 ||
      /mobile|android|iphone|ipad|ipod/i.test(navigator.userAgent);

    if (needsUserGesture) {
      console.log('Mobile device detected - showing overlay in 2 seconds...');
      setTimeout(() => {
        showOverlay();
      }, 2000);
    }
  </script>
</body>
</html>
